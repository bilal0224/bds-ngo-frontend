(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[483],{6226:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/members",function(){return t(8055)}])},8055:function(e,n,t){"use strict";t.r(n);var r=t(4051),o=t.n(r),a=t(5893),i=t(7054),s=t(954),l=t(3640),u=t(1577),c=t(695),d=t(7294),m=t(7183),f=t(8157),h=t(8795),p=t(2714),b=t(8869),x=t(9243),y=t(5144),v=t(1163),g=t(9669),j=t.n(g),N=t(782),k=t(3454);function w(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function _(e,n,t,r,o,a,i){try{var s=e[a](i),l=s.value}catch(u){return void t(u)}s.done?n(l):Promise.resolve(l).then(r,o)}function Z(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){_(a,r,o,i,s,"next",e)}function s(e){_(a,r,o,i,s,"throw",e)}i(void 0)}))}}function E(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a=[],i=!0,s=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);i=!0);}catch(l){s=!0,o=l}finally{try{i||null==t.return||t.return()}finally{if(s)throw o}}return a}}(e,n)||C(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||C(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,n){if(e){if("string"===typeof e)return w(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?w(e,n):void 0}}d.useLayoutEffect=d.useEffect;m.Z.Header;var F=m.Z.Content,S=(m.Z.Footer,m.Z.Sider);f.Z.SubMenu;n.default=function(){var e=(0,d.useContext)(y.j),n=e[0],t=(e[1],(0,d.useState)(!1)),r=t[0],g=t[1],w=(0,d.useState)(!0),_=w[0],C=w[1],A=(0,d.useState)([]),P=A[0],T=A[1],B=E(i.Z.useForm(),1)[0],O=(0,v.useRouter)();function q(){return(q=Z(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j().get("".concat(k.env.NEXT_PUBLIC_API,"/current-ngo/members"),{params:{_id:n&&n.ngo&&n.ngo._id,email:n&&n.ngo&&n.ngo.email}});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log(n),null===n&&O.push("/"),(0,d.useEffect)((function(){(function(){return q.apply(this,arguments)})().then((function(e){var n=e.membersQuery[0].members_info;console.log(n);for(var t=0;t<n.length;t++)n[t].key=n[t].email;T(n),console.log(n)})).catch((function(e){return console.log(e)}))}),[]);var D=[{title:"Name",dataIndex:"name",key:"name"},{title:"Email",dataIndex:"email",key:"email",filterDropdown:function(e){var n=e.setSelectedKeys,t=e.selectedKeys,r=e.confirm,o=e.clearFilters;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Z,{autoFocus:!0,placeholder:"Search Email",value:t[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){r()},onBlur:function(){r()}}),(0,a.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,a.jsx)("button",{type:"button",className:"btn btn-primary m-2",onClick:function(){o()},children:"Reset"}),(0,a.jsx)("button",{type:"button",className:"btn btn-secondary m-2",onClick:function(){return r()},children:"Search"})]})]})},filterIcon:function(){return(0,a.jsx)(h.Z,{})},onFilter:function(e,n){return n.email.includes(e)}},{title:"Donations",dataIndex:"donations",key:"donations",sorter:function(e,n){return e.donations>n.donations}},{title:"Blood Type",dataIndex:"bloodType",key:"bloodType",filters:[{text:"A+",value:"A+"},{text:"A-",value:"A-"},{text:"B+",value:"B+"},{text:"B-",value:"B-"},{text:"AB+",value:"AB+"},{text:"AB-",value:"AB-"},{text:"O-",value:"O-"},{text:"O+",value:"O+"}],onFilter:function(e,n){return n.bloodType==e}},{title:"Phone Number",dataIndex:"phoneNumber",key:"phoneNumber",filterDropdown:function(e){var n=e.setSelectedKeys,t=e.selectedKeys,r=e.confirm,o=e.clearFilters;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Z,{autoFocus:!0,placeholder:"Search By Phone",value:t[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){r()},onBlur:function(){r()}}),(0,a.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,a.jsx)("button",{type:"button",className:"btn btn-primary m-2",onClick:function(){o()},children:"Reset"}),(0,a.jsx)("button",{type:"button",className:"btn btn-secondary m-2",onClick:function(){return r()},children:"Search"})]})]})},filterIcon:function(){return(0,a.jsx)(h.Z,{})},onFilter:function(e,n){return n.phoneNumber.startsWith(e)}},{key:"deleteEntry",title:"Delete Entry",render:function(e){return(0,a.jsx)(p.Z,{onClick:function(){return K(e)},className:"m-1",style:{color:"red"}})}}],R=function(){var e=Z(o().mark((function e(t){var r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,j().put("".concat(k.env.NEXT_PUBLIC_API,"/current-ngo/add-new-member"),{new_member_info:t,ngo_id:n&&n.ngo&&n.ngo._id,ngo_email:n&&n.ngo&&n.ngo.email});case 4:r=e.sent.data,console.log(r.userExists),(a=r.userExists).key=a.email,T((function(e){return[r.userExists].concat(I(e))})),g(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),N.Am.error(e.t0.response.data);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(n){return e.apply(this,arguments)}}(),K=function(){var e=Z(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.Z.confirm({title:"Delete the selected member?",okText:"Yes",okType:"danger",onOk:Z(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j().put("".concat(k.env.NEXT_PUBLIC_API,"/current-ngo/remove-member"),{ngo_id:n&&n.ngo&&n.ngo._id,user_id:t._id});case 2:e.sent.data,T((function(e){return e.filter((function(e){return e._id!=t._id}))}));case 4:case"end":return e.stop()}}),e)})))}),console.log(t);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(m.Z,{hasSider:!0,style:{height:"100vh"},className:"d-flex",children:[(0,a.jsx)(S,{collapsible:!0,children:(0,a.jsxs)(f.Z,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline",children:[(0,a.jsx)(f.Z.Item,{icon:(0,a.jsx)(b.Z,{}),onClick:function(){return C(!0)},children:"Members Table"},"1"),(0,a.jsx)(f.Z.Item,{icon:(0,a.jsx)(x.Z,{}),onClick:function(){return C(!1)},children:"NGO Description"},"2")]})}),(0,a.jsx)(F,{children:_?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"d-flex justify-content-between",children:(0,a.jsx)("button",{className:"btn btn-primary m-3",onClick:function(){return g(!0)},children:"Enter New User"})}),(0,a.jsx)(l.Z,{title:"Enter New Member",visible:r,onCancel:function(){return g(!1)},footer:[],children:(0,a.jsxs)(i.Z,{labelCol:{span:7},onFinish:function(e){return R(e)},form:B,children:[(0,a.jsx)(i.Z.Item,{name:"name",label:"Full Name",rules:[{required:!0,message:"Member's name is required"},{whitespace:!0}],hasFeedback:!0,children:(0,a.jsx)(s.Z,{placeholder:"Type member's name"})}),(0,a.jsx)(i.Z.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Email is required"},{type:"email",message:"Please enter a valid email"}],hasFeedback:!0,children:(0,a.jsx)(s.Z,{placeholder:"Type member's email"})}),(0,a.jsx)(i.Z.Item,{name:"phoneNumber",label:"Phone Number",rules:[{required:!0,message:"Phone is required"},{whitespace:!0}],hasFeedback:!0,children:(0,a.jsx)(s.Z,{placeholder:"Type member's Phone Number"})}),(0,a.jsx)(i.Z.Item,{children:(0,a.jsxs)("div",{className:"d-flex justify-content-around",children:[(0,a.jsx)(u.Z,{type:"primary",htmlType:"submit",children:"Register"}),(0,a.jsx)("button",{className:"btn btn-dark",onClick:function(){return B.resetFields()},children:"Reset Fields"}),(0,a.jsx)("button",{className:"btn btn-light",onClick:function(){g(!1),B.resetFields()},children:"Return"})]})})]})}),(0,a.jsx)(c.Z,{dataSource:P,columns:D,bordered:!0,style:{margin:10}})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"d-flex",children:(0,a.jsxs)("h3",{className:"pt-4 px-4",children:["NGO Name: ",n&&n.ngo&&n.ngo.name]})}),(0,a.jsx)("div",{className:"d-flex",children:(0,a.jsxs)("h3",{className:"pt-4 px-4",children:["NGO Email: ",n&&n.ngo&&n.ngo.email]})}),(0,a.jsx)("hr",{})]})})]})})}}},function(e){e.O(0,[444,723,301,774,888,179],(function(){return n=6226,e(e.s=n);var n}));var n=e.O();_N_E=n}]);